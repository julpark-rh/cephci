# Objective: Execute external S3Tests
# Conf: 5-node-cluster.yaml
# Platform: independent
---
tests:
  - test:
      name: initial vm configuration
      module: install_prereq.py
      abort-on-fail: true

  - test:
      name: ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
          ceph_origin: distro
          ceph_repository: rhcs
          ceph_rhcs_version: 4
          osd_scenario: lvm
          copy_admin_key: true
          dashboard_enabled: false
      desc: test deploying of cluster setup using ceph-ansible
      destroy-cluster: false
      abort-on-fail: true
      polarion-id: CEPH-83571467

  - test:
      name: check-ceph-health
      module: exec.py
      config:
        cmd: ceph -s
        sudo: true
      desc: Check for ceph health debug info

  - test:
      name: s3 tests
      module: test_s3.py
      config:
        branch: ceph-nautilus
      desc: execution of s3 tests against radosgw
      destroy-cluster: false
